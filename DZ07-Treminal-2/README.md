### Домашняя работа к занятию "3.2. Работа в терминале, лекция 2"

1. Какого типа команда cd? Попробуйте объяснить, почему она именно такого типа; опишите ход своих мыслей, если считаете что она могла бы быть другого типа.
```
vagrant@vagrant:~$ type cd
cd is a shell builtin

умных мыслей нет
```
2. Какая альтернатива без pipe команде grep <some_string> <some_file> | wc -l? man grep поможет в ответе на этот вопрос. Ознакомьтесь с документом о других подобных некорректных вариантах использования pipe.
```
grep -c something text.txt
```
3. Какой процесс с PID 1 является родителем для всех процессов в вашей виртуальной машине Ubuntu 20.04?
```
vagrant@vagrant:~$ ps -ax
    PID TTY      STAT   TIME COMMAND
      1 ?        Ss     0:00 /sbin/init
```
4. Как будет выглядеть команда, которая перенаправит вывод stderr ls на другую сессию терминала?
```
ls /NoneDir 2>/dev/pts/2
```
5. Получится ли одновременно передать команде файл на stdin и вывести ее stdout в другой файл? Приведите работающий пример.
```
cat < test.txt > test2.txt
```
6. Получится ли вывести находясь в графическом режиме данные из PTY в какой-либо из эмуляторов TTY? Сможете ли вы наблюдать выводимые данные?
```
Да получится, сможем наблюдать если переключимся в нужный терминал.
```
7. Выполните команду bash 5>&1. К чему она приведет? Что будет, если вы выполните echo netology > /proc/$$/fd/5? Почему так происходит?
```
vagrant@vagrant:~$ bash 5>&1
vagrant@vagrant:~$ echo netology > /proc/$$/fd/5
netology
vagrant@vagrant:~$ ls /proc/$$/fd
0  1  2  255  5

Т.к. создан новый файловый дескриптор 5 который перенаправлен в файловый дескриптор 1 (STDOUT), Теперь всё что в него попадает отображается в STDOUT
```
8. Получится ли в качестве входного потока для pipe использовать только stderr команды, не потеряв при этом отображение stdout на pty?
```
ls /etc /none 3>&1 1>&2 2>&3 | grep such
```
9. Что выведет команда cat /proc/$$/environ? Как еще можно получить аналогичный по содержанию вывод?
```
Выводит переменные окружения, еще можно получить командами env, printenv, set (без аргументов) 
```
10. Используя man, опишите что доступно по адресам /proc/<PID>/cmdline, /proc/<PID>/exe.
```
/proc/<PID>/cmdline - Команда вместе с её аргументами при запуске
/proc/<PID>/exe - Символическая ссылка на исполняемый файл
```
11. Узнайте, какую наиболее старшую версию набора инструкций SSE поддерживает ваш процессор с помощью /proc/cpuinfo
```
cat /proc/cpuinfo|grep sse

flags		: sse sse2  ssse3  sse4_1 sse4_2 

sse4_2 - Наиболее старшая
```
12. При открытии нового окна терминала и vagrant ssh создается новая сессия и выделяется pty. Это можно подтвердить командой tty, которая упоминалась в лекции 3.2. Однако:
vagrant@netology1:~$ ssh localhost 'tty'
not a tty
Почитайте, почему так происходит, и как изменить поведение.

```
При выполнении команды переданой в параметре ssh tty не выделяется, но если выполнить ssh без параметров то ssh выделяет tty и запзапускает shell. Для выделения псевдотерминала принудительно нужно указать ключ -t

vagrant@vagrant:~$ ssh localhost 'tty'
not a tty
vagrant@vagrant:~$ ssh -t localhost 'tty'
/dev/pts/1
Connection to localhost closed.
vagrant@vagrant:~$
```
13. Бывает, что есть необходимость переместить запущенный процесс из одной сессии в другую. Попробуйте сделать это, воспользовавшись reptyr. Например, так можно перенести в screen процесс, который вы запустили по ошибке в обычной SSH-сессии
```
Работает, но под Ubuntu надо выполнить echo 0 > /proc/sys/kernel/yama/ptrace_scope
```